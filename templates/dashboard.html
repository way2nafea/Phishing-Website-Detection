<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dashboard - Phishing Detection</title>

    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-dark text-light">

<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg navbar-dark bg-black shadow">
    <div class="container-fluid">
        <a class="navbar-brand fw-bold text-success" href="/">ðŸ›¡ Phishing Detector</a>

        <div class="d-flex">
            <a href="/" class="btn btn-outline-success me-2">Scan New URL</a>
            <a href="/logout" class="btn btn-outline-danger">Logout</a>
        </div>
    </div>
</nav>

<div class="container mt-5">

    <h2 class="mb-4 text-center">ðŸ“Š Your Scan History</h2>

    {% if scans %}
    <div class="table-responsive">
        <table class="table table-dark table-hover align-middle text-center shadow">
            <thead class="table-success text-dark">
                <tr>
                    <th>ID</th>
                    <th>URL</th>
                    <th>Risk Score</th>
                    <th>Status</th>
                </tr>
            </thead>

            <tbody>
                {% for scan in scans %}
                <tr>
                    <td>{{ scan.id }}</td>

                    <td class="text-start">
                        <small>{{ scan.url }}</small>
                    </td>

                    <td style="width:200px;">
                        <div class="progress bg-secondary">
                            <div class="progress-bar
                                {% if scan.risk_score < 30 %}
                                    bg-success
                                {% elif scan.risk_score < 70 %}
                                    bg-warning
                                {% else %}
                                    bg-danger
                                {% endif %}"
                                role="progressbar"
                                style="width: {{ scan.risk_score }}%">
                                {{ scan.risk_score }}%
                            </div>
                        </div>
                    </td>

                    <td>
                        {% if scan.risk_score < 30 %}
                            <span class="badge bg-success">SAFE</span>
                        {% elif scan.risk_score < 70 %}
                            <span class="badge bg-warning text-dark">SUSPICIOUS</span>
                        {% else %}
                            <span class="badge bg-danger">PHISHING</span>
                        {% endif %}
                    </td>

                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    {% else %}
        <div class="alert alert-info text-center mt-5">
            No scans yet. Start scanning URLs!
        </div>
    {% endif %}

</div>

</body>
</html>